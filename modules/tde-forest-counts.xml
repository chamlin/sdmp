<template xmlns="http://marklogic.com/xdmp/tde">
    <path-namespaces>
        <path-namespace>
            <prefix>fs</prefix>
            <namespace-uri>http://marklogic.com/xdmp/status/forest</namespace-uri>
        </path-namespace>
    </path-namespaces>
    <context>/fs:forest-counts</context>
    <vars>
        <var>
            <name>P</name>
            <val>xs:string ('http://marklogic.com/sdmp/forest')</val>
        </var>
        <var>
            <name>PSLASH</name>
            <val>xs:string (fn:concat ($P, '/'))</val>
        </var>
        <var>
            <name>PSHARP</name>
            <val>xs:string (fn:concat ($P, '#'))</val>
        </var>
        <var>
            <name>FIRI</name>
            <val>sem:iri (fn:concat ($PSHARP, fs:forest-id))</val>
        </var>
    </vars>
    <triples>
        <triple>
            <subject>
                <val>$FIRI</val>
            </subject>
            <predicate>
                <val>sem:iri('http://www.w3.org/2000/01/rdf-schema#a')</val>
            </predicate>
            <object>
                <val>sem:iri($P)</val>
            </object>
        </triple>
        <triple>
            <subject>
                <val>$FIRI</val>
            </subject>
            <predicate>
                <val>sem:iri($PSLASH||'forest-id')</val>
            </predicate>
            <object>
                <val>xs:unsignedLong(fs:forest-id)</val>
            </object>
        </triple>
        <triple>
            <subject>
                <val>$FIRI</val>
            </subject>
            <predicate>
                <val>sem:iri($PSLASH||'forest-name')</val>
            </predicate>
            <object>
                <val>xs:string(fs:forest-name)</val>
            </object>
        </triple>
        <triple>
            <subject>
                <val>$FIRI</val>
            </subject>
            <predicate>
                <val>sem:iri($PSLASH||'current-time')</val>
            </predicate>
            <object>
                <val>xs:dateTime(fs:current-time)</val>
            </object>
        </triple>
        <triple>
            <subject>
                <val>$FIRI</val>
            </subject>
            <predicate>
                <val>sem:iri($PSLASH||'document-count')</val>
            </predicate>
            <object>
                <val>xs:unsignedLong(fs:document-count)</val>
            </object>
        </triple>
        <triple>
            <subject>
                <val>$FIRI</val>
            </subject>
            <predicate>
                <val>sem:iri($PSLASH||'directory-count')</val>
            </predicate>
            <object>
                <val>xs:unsignedLong(fs:directory-count)</val>
            </object>
        </triple>
    </triples>
    <templates>
        <template>
            <context>fs:stands-counts/fs:stand-counts</context>
            <vars>
                <var>
                    <name>P</name>
                    <val>xs:string ('http://marklogic.com/sdmp/stand')</val>
                </var>        
                <var>
                    <name>PSLASH</name>
                    <val>xs:string (fn:concat ($P, '/'))</val>
                </var>
                <var>
                    <name>PSHARP</name>
                    <val>xs:string (fn:concat ($P, '#'))</val>
                </var>
                <var>
                    <name>SIRI</name>
                    <val>sem:iri (fn:concat ($PSHARP, fs:stand-id))</val>
                </var>              
            </vars>
            <triples>
                <triple>
                    <subject>
                        <val>$SIRI</val>
                    </subject>
                    <predicate>
                        <val>sem:iri('http://www.w3.org/2000/01/rdf-schema#a')</val>
                    </predicate>
                    <object>
                        <val>sem:iri($P)</val>
                    </object>
                </triple>
                <triple>
                    <subject>
                        <val>$FIRI</val>
                    </subject>
                    <predicate>
                        <val>sem:iri('http://marklogic.com/sdmp/forest/has-stand')</val>
                    </predicate>
                    <object>
                        <val>$SIRI</val>
                    </object>
                </triple>
                <triple>
                    <subject>
                        <val>$SIRI</val>
                    </subject>
                    <predicate>
                        <val>sem:iri(fn:concat($PSLASH, 'path'))</val>
                    </predicate>
                    <object>
                        <val>xs:string(fs:path)</val>
                    </object>
                </triple>
                <triple>
                    <subject>
                        <val>$SIRI</val>
                    </subject>
                    <predicate>
                        <val>sem:iri(fn:concat($PSLASH, 'active-fragment-count'))</val>
                    </predicate>
                    <object>
                        <val>xs:string(fs:active-fragment-count)</val>
                    </object>
                </triple>
                <triple>
                    <subject>
                        <val>$SIRI</val>
                    </subject>
                    <predicate>
                        <val>sem:iri(fn:concat($PSLASH, 'nascent-fragment-count'))</val>
                    </predicate>
                    <object>
                        <val>xs:string(fs:nascent-fragment-count)</val>
                    </object>
                </triple>
                <triple>
                    <subject>
                        <val>$SIRI</val>
                    </subject>
                    <predicate>
                        <val>sem:iri(fn:concat($PSLASH, 'deleted-fragment-count'))</val>
                    </predicate>
                    <object>
                        <val>xs:string(fs:deleted-fragment-count)</val>
                    </object>
                </triple>
            </triples>
        </template>
    </templates>
</template>
